<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.7/firebase-firestore.js"></script>
    <script src="assets/css/fbase.js"></script>


    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register page - Nanny Stick</title>

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,700,700i&display=swap"
        rel="stylesheet">


    <link href="assets/css/login.css" rel="stylesheet">

</head>

<body>
    <nav class="navbar-login">
        <div class="container-fluid">
            <h1 class="text-light"><a href="index.html"><span>Nanny stick</span></a></h1>
        </div>
    </nav>

    <section class="container">
        <div class="login-container">
            <div class="circle circle-oine"></div>
            <div class="form-container">
                <!--imagen de github   
                <img src="https://raw.githubusercontent.com/hicodersofficial/glassmorphism-login-form/master/assets/illustration.png" alt="illustration" class="illustration" />
                -->
                <h1>REGISTER</h1>
                <form>
                    <input id="email" required type="email" name="email" placeholder="EMAIL" />
                    <input id="password" required type="password" name="password" placeholder="PASSWORD" />
                    <button id="signup" type="submit">Registrar</button>
                </form>
                <script>
                    // Agrega un evento de escucha al botón de registro
                    document.querySelector('#signup').addEventListener('click', function (e) {
                        e.preventDefault();
                        var email = document.querySelector('#email').value;
                        var password = document.querySelector('#password').value;

                        // Crea la cuenta de usuario en Firebase
                        firebase.auth().createUserWithEmailAndPassword(email, password)
                            .then(function (user) {
                                // El usuario se ha registrado exitosamente
                                console.log('El usuario se ha registrado exitosamente');

                                // Envía un correo electrónico de verificación al usuario
                                firebase.auth().currentUser.sendEmailVerification()
                                    .then(() => {
                                        // Email verification sent!
                                        // ...
                                        console.log("enviando...");
                                        window.location.href = "home.html";
                                    }).catch(function (error) {
                                        //         // Hubo un error al enviar el correo electrónico de verificación
                                        console.log(error.message);
                                    });

                            })
                            .catch(function (error) {
                                // Hubo un error al registrar al usuario
                                console.log(error.message);
                            });

                    });

                    firebase.auth().onAuthStateChanged((user) => {
                        if (user) {
                            // User is signed in, see docs for a list of available properties
                            // https://firebase.google.com/docs/reference/js/firebase.User
                            var uid = user.uid;
                            console.log("usuario logeado")
                            window.location.href = "home.html";
                            // ...
                        } else {
                            // User is signed out
                            // ...
                            console.log('No hay usuario logeado')
                        }
                    });

                </script>
                <div class="register-forget opacity">
                    <a href="login.html">ALREADY HAVE ACCOUNT.</a>
                </div>
            </div>
            <div class="circle circle-two"></div>
        </div>
        <div class="theme-btn container"> </div>
    </section>

    <!-- Template Main JS File -->
    <script src="assets/js/index.js"></script>
</body>

</html>